{
  "name": "Axion Dev Container",
  "image": "mcr.microsoft.com/devcontainers/go:1-1.22-bookworm",
  
  // Habilita permiss√µes avan√ßadas (√∫til se voc√™ tentar rodar Docker/LXD dentro)
  "runArgs": [
    "--privileged",
    "--cgroupns=host"
  ],

  "features": {
    // Instala Docker (opcional, mas bom ter)
    "ghcr.io/devcontainers/features/docker-in-docker:2": {},
    
    // üî• A M√ÅGICA DO BANCO DE DADOS üî•
    // Isso instala o Postgres e j√° cria o usu√°rio/senha/db para voc√™!
    "ghcr.io/devcontainers/features/postgres:1": {
      "version": "16",
      "username": "axion",
      "password": "axion_password",
      "database": "axion_db"
    },
    
    // Ferramentas √∫teis de rede (curl, ip, etc)
    "ghcr.io/devcontainers/features/common-utils:2": {
      "configureZshAsDefaultShell": true
    }
  },

  // Extens√µes do VS Code que ser√£o instaladas sozinhas
  "customizations": {
    "vscode": {
      "extensions": [
        "golang.go",
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode",
        "bradlc.vscode-tailwindcss"
      ]
    }
  },

  // Comandos para rodar assim que o container criar
  // 1. Garante que as depend√™ncias do Go est√£o baixadas
  // 2. Instala depend√™ncias do Frontend (se a pasta existir)
  "postCreateCommand": "go mod tidy && cd frontend && npm install",

  // Vari√°veis de ambiente globais para o container
  "remoteEnv": {
    "DB_HOST": "localhost",
    "DB_USER": "axion",
    "DB_PASSWORD": "axion_password",
    "DB_NAME": "axion_db",
    "DB_PORT": "5432"
  },

  // Exp√µe as portas (Frontend: 3500, Backend: 8500, DB: 5432)
  "forwardPorts": [3500, 8500, 5432]
}
